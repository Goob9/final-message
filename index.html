<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Monique — Private Letter</title>

  <!-- Homemade Apple (handwritten) -->
  <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f2e6da;
      --cream:#fff9f0;
      --ink:#3b322c;
      --accent:#bfa27a;
      --envelope:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#f7f3ee 0%, #efe7da 100%);
      font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:28px;
    }

    .stage{width:100%;max-width:820px; text-align:center;}

    /* Locked screen */
    .locked{
      background:rgba(255,255,255,0.9);
      padding:28px;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.06);
    }
    .locked h1{margin:0 0 8px;font-size:20px}
    .hint{color:#6b6763;font-size:14px}

    /* Envelope */
    .envelope-wrap{display:flex;flex-direction:column;align-items:center;gap:12px;margin-top:14px}
    .envelope{
      width:360px;
      height:220px;
      position:relative;
      perspective:1000px;
      cursor:pointer;
      user-select:none;
      outline: none;
    }

    .back{
      position:absolute;inset:0;
      background:var(--envelope);
      border-radius:10px;
      box-shadow:0 18px 40px rgba(20,20,20,0.12);
      overflow:visible;
    }

    /* flap */
    .flap{
      position:absolute;
      left:0;right:0;top:-2px;
      height:50%;
      background:linear-gradient(180deg,#fff,#f8f6f4);
      transform-origin:top center;
      border-top-left-radius:10px;
      border-top-right-radius:10px;
      transform:perspective(600px) rotateX(0deg);
      transition:transform 850ms cubic-bezier(.2,.9,.2,1);
      box-shadow:inset 0 -1px 0 rgba(0,0,0,0.03);
    }

    .seal {
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:36%;
      width:74px;height:22px;
      background:transparent;
      pointer-events:none;
      opacity:0.85;
      font-size:12px;
      color:#bfa27a;
    }

    /* letter stub inside envelope (small) */
    .letter-stub{
      position:absolute;
      left:22px; right:22px; top:62px;
      height:94px;
      background:linear-gradient(180deg,#fffefc,#fffdf7);
      border-radius:6px;
      box-shadow:0 8px 20px rgba(12,11,10,0.06);
      transform:translateY(220px);
      transition:transform 700ms cubic-bezier(.2,.9,.2,1);
      padding:14px;
      text-align:left;
      color:var(--ink);
      overflow:hidden;
    }

    /* when envelope open: flap rotates, stub moves slightly up */
    .envelope.open .flap{ transform:perspective(600px) rotateX(-180deg) }
    .envelope.open .letter-stub{ transform:translateY(-8px); }

    /* hover shake */
    .envelope:hover{ animation:shake 700ms ease; }
    @keyframes shake{
      10%{transform:translateX(-4px)}
      30%{transform:translateX(3px)}
      50%{transform:translateX(-2px)}
      70%{transform:translateX(1px)}
      100%{transform:translateX(0)}
    }

    /* full-screen letter (hidden initially) */
    .letter-page {
      position:fixed;
      inset:0;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:48px;
      background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06)); /* slight backdrop */
      opacity:0;
      pointer-events:none;
      transition:opacity 700ms ease;
      z-index:40;
      -webkit-overflow-scrolling:touch;
    }

    .letter-sheet{
      width:min(860px,92%);
      max-height:calc(100vh - 120px);
      background:var(--cream);
      border-radius:8px;
      box-shadow:0 30px 80px rgba(14,11,8,0.25);
      padding:48px 56px;
      overflow:auto;
      transform:translateY(18px);
      transition:transform 600ms ease, box-shadow 300ms ease;
      position:relative;
      border:1px solid rgba(28,20,14,0.03);
      line-height:1.65;
    }

    /* paper texture: subtle SVG noise overlay */
    .letter-sheet::before{
      content:'';
      position:absolute;inset:0;border-radius:8px;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.05) 0, rgba(255,255,255,0) 6%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.01));
      pointer-events:none;
    }
    .letter-sheet::after{
      /* light grain using data SVG */
      content:'';
      position:absolute;inset:0;border-radius:8px;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='f'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='1' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='table' tableValues='0 0.06' /></feComponentTransfer></filter><rect width='100%' height='100%' filter='url(%23f)' fill='%23f6efe5' opacity='0.35'/></svg>");
      opacity:0.22;
      pointer-events:none;
      mix-blend-mode:multiply;
    }

    /* show letter */
    .letter-page.show{opacity:1; pointer-events:auto}
    .letter-page.show .letter-sheet{ transform:translateY(0); }

    /* Fonts and text styles */
    .letter-body{
      font-family: 'Homemade Apple', Georgia, serif;
      font-size:20px;
      color:var(--ink);
      white-space:pre-wrap;
    }

    .letter-head{
      text-align:center;
      margin-bottom:10px;
      font-family:Georgia, serif;
      color:#4b3f36;
      font-size:20px;
      font-weight:600;
    }

    .signature{
      display:block;
      margin-top:26px;
      font-size:26px;
      font-family:'Homemade Apple', Georgia, serif;
      color:var(--ink);
    }

    /* close button */
    .close-btn{
      position:fixed;
      right:28px; top:28px;
      z-index:60;
      background:rgba(255,255,255,0.92);
      border-radius:10px;
      padding:8px 12px;
      box-shadow:0 6px 20px rgba(0,0,0,0.12);
      font-weight:600;
      border:1px solid rgba(0,0,0,0.04);
      cursor:pointer;
      display:none;
    }
    .close-btn.show{display:inline-block}

    /* responsive tweaks */
    @media (max-width:700px){
      .letter-sheet{ padding:28px 22px; font-size:18px }
      .letter-body{ font-size:18px }
    }

    /* accessibility focus */
    .envelope:focus { box-shadow:0 0 0 4px rgba(191,162,122,0.14) }
    .vh{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
  </style>
</head>
<body>

  <div class="stage">
    <!-- locked screen (shown if token missing/wrong) -->
    <div id="lockedScreen" class="locked" style="display:none">
      <h1>Private message</h1>
      <p class="hint">This message is private. Open it only with the secret link provided by the sender.</p>
      <p class="hint">Make sure the URL includes <code>?t=monique</code>.</p>
    </div>

    <!-- envelope area (shown only when token valid) -->
    <div id="envelopeArea" style="display:none">
      <div style="text-align:center">
        <h2 style="margin:0;font-weight:400;font-family:Georgia,serif;color:#4b3f36">A Private Letter</h2>
        <p style="margin:8px 0 20px;color:#6b6a66">Click or tap the envelope to open</p>
      </div>

      <div class="envelope-wrap">
        <div id="envelope" class="envelope" tabindex="0" role="button" aria-label="Open private letter">
          <div class="back">
            <div class="flap" aria-hidden="true"></div>
            <div class="seal" aria-hidden="true">• • •</div>

            <div class="letter-stub" aria-hidden="true">
              <div style="font-size:15px;color:#5a5048;line-height:1.4;max-height:100%;overflow:hidden">
                Dear Monique,
                <br><br>
                Strange, isn’t it? That the first letter I ever write to you will also be the last...
              </div>
            </div>
          </div>
        </div>

        <div style="font-size:13px;color:#7b7268">Secret link required — keep it private.</div>
      </div>
    </div>
  </div>

  <!-- full-screen letter (hidden until envelope opened) -->
  <button id="closeBtn" class="close-btn" aria-hidden="true">Close</button>

  <div id="letterPage" class="letter-page" aria-hidden="true" role="dialog" aria-label="Private letter">
    <article class="letter-sheet" role="document" aria-live="polite">
      <div class="letter-head">For Monique</div>
      <div class="letter-body" id="messageContent">
Dear Monique,

Strange, isn’t it?
That the first letter I ever write to you will also be the last.
For years, my feelings slipped out in fragments—through drunk calls, whispered confessions, and those quiet nights when missing you felt heavier than breathing. I used to think love was something that happened only to other people… until you proved me wrong. You were the first to my everything, and a part of me quietly hoped I would be your last.

Maybe you don’t remember, but I think I know why I held on for so long. You once told me a story—about the ex before me. How you wanted to go back, only to find he had already moved on. That story etched itself into me. I never wanted you to come back and find me gone too. So I stayed. I waited. I became the man who couldn’t be moved.

I don’t know if past me ever asked you for a hug. I hope he did—because I think he would regret it for the rest of his life if he didn’t. You were always free to refuse, of course. But I wish he had asked.

About the money—I know you used it for what it was meant for. I know it can’t make up for the lifetime I won’t be there on your side of Connie, but I hope it lightened your load, even just a little.

Thank you for staying in my life longer than you had to. Thank you for tolerating me, for holding space for me, even when what we had had become more memory than reality. I think I’m finally ready to step out of the cage I built—made of hope, fear, and what-ifs. I think I can finally walk forward.

I’m sorry I grew tired. I’m sorry for what I didn’t do, for what I should’ve done. It hurts to accept that you are a chapter and not the whole book—but some chapters leave fingerprints on every page that follows. Yours will.

The moon is still beautiful, isn’t it, Monique?
It always will be.

Keep chasing your dreams. I know you’ll carry that LPT with pride. <3
I used the pen you gave me during my board exams. So I guess I have to honor my promise—and chase that MD next. Please take care of yourself. Don’t ever become my first patient.

And if it’s true that life flashes in its final sixty seconds—if all the moments that mattered replay in one last flicker of light—I know you’ll be there in those final frames.

Maybe the hardest part isn’t losing you. Maybe it’s letting go of the future I once built around your name.

<span class="signature">— Khen</span>
      </div>
    </article>
  </div>

  <script>
    // CONFIG
    const SECRET = "monique";

    // Helpers
    function getParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    const token = getParam('t') || '';
    const lockedScreen = document.getElementById('lockedScreen');
    const envelopeArea = document.getElementById('envelopeArea');
    const envelope = document.getElementById('envelope');
    const letterPage = document.getElementById('letterPage');
    const closeBtn = document.getElementById('closeBtn');

    if (token === SECRET) {
      lockedScreen.style.display = 'none';
      envelopeArea.style.display = 'block';
    } else {
      lockedScreen.style.display = 'block';
      envelopeArea.style.display = 'none';
    }

    // Open envelope -> show full-page letter
    function openEnvelope() {
      // Small guard to prevent repeated open animations
      if (envelope.classList.contains('open')) {
        // If already open, toggle letter visibility
        showLetter();
        return;
      }
      envelope.classList.add('open');

      // after flap animation finishes, reveal full letter
      setTimeout(showLetter, 900);
    }

    function showLetter() {
      // show overlay sheet
      letterPage.classList.add('show');
      letterPage.setAttribute('aria-hidden', 'false');
      closeBtn.classList.add('show');
      closeBtn.setAttribute('aria-hidden', 'false');

      // lock background scroll for mobile
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';

      // set focus to the letter for accessibility
      const firstFocusable = document.getElementById('messageContent');
      if (firstFocusable) firstFocusable.focus?.();
    }

    function closeLetter() {
      letterPage.classList.remove('show');
      letterPage.setAttribute('aria-hidden', 'true');
      closeBtn.classList.remove('show');
      closeBtn.setAttribute('aria-hidden', 'true');
      document.documentElement.style.overflow = '';
      document.body.style.overflow = '';
      // keep envelope open visually, but letter hidden — user can reopen
    }

    // events
    envelope.addEventListener('click', openEnvelope);
    envelope.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openEnvelope(); }
    });

    closeBtn.addEventListener('click', closeLetter);

    // allow Esc to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLetter();
    });
  </script>
</body>
</html>
